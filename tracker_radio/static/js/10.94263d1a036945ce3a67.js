webpackJsonp([10],{fkBk:function(t,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=r("Xxa5"),n=r.n(e),i=r("exGp"),c=r.n(i),s=r("mtWM"),o=r.n(s),u=r("TPW+"),l=r("X+2x"),v={name:"Track",props:{user:Object},data:function(){return{trackId:null,track:null}},components:{StarRating:r.n(l).a},watch:{user:function(t,a){this.getTrackData()}},methods:{getTrackData:function(){var t=this;return c()(n.a.mark(function a(){var r,e;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.trackId){a.next=12;break}if(r="https://indigobeetle.pythonanywhere.com/api/tracks/"+t.trackId,!t.user){a.next=10;break}return a.next=5,t.user.getIdToken(!0);case 5:return e=a.sent,a.next=8,o.a.get(r,{headers:{Authorization:"bearer "+e}}).then(function(a){t.track=a.data}).catch(function(t){console.log(t)});case 8:a.next=12;break;case 10:return a.next=12,o.a.get(r).then(function(a){t.track=a.data}).catch(function(t){console.log(t)});case 12:case"end":return a.stop()}},a,t)}))()},onPlay:function(){this.$emit("play-track",this.trackId)},onSetRating:function(t,a){var r=this;this.setRating(t,a).then(function(){r.getTrackData()})},onFavouriteTrack:function(t){var a=this;this.setFavourite(t).then(function(){a.getTrackData()})}},mixins:[u.a],created:function(){var t=this;this.trackId=parseInt(this.$route.params.id),this.getTrackData().then(function(){"1"===t.$route.query.play&&t.onPlay()})}},k={render:function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{attrs:{id:"content"}},[t.track?r("v-container",{attrs:{"grid-list-xl":""}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{sm2:""}},[r("v-img",{attrs:{src:t.getRandomAvatar(t.track.artist.id)}})],1),t._v(" "),r("v-flex",{attrs:{sm6:""}},[r("v-layout",{attrs:{column:"","fill-height":"","align-start":"","justify-center":""}},[r("h3",{staticClass:"track-title"},[t._v(t._s(t.track.title))]),t._v(" "),r("router-link",{attrs:{to:{name:"artist",params:{id:t.track.artist.id}}}},[r("h4",{staticClass:"artist-name"},[t._v(t._s(t.track.artist.name))])]),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:t.onPlay}},[r("v-icon",{attrs:{large:""}},[t._v("play_circle_filled")])],1)],1)],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{shrink:""}},[r("star-rating",{attrs:{"star-size":20},on:{"rating-selected":function(a){t.onSetRating(a,t.track)}},model:{value:t.track.average_rating,callback:function(a){t.$set(t.track,"average_rating",a)},expression:"track.average_rating"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{shrink:""}},[r("v-btn",{attrs:{icon:"",flat:""},on:{click:function(a){a.stopPropagation(),t.onFavouriteTrack(t.track)}}},[r("v-icon",{attrs:{medium:"",color:t.track.is_favourite_of_current_user?"red":"grey"}},[t._v("\n            favorite\n          ")])],1)],1)],1)],1):t._e()],1)},staticRenderFns:[]};var f=r("VU/8")(v,k,!1,function(t){r("oHFR")},"data-v-5a762854",null);a.default=f.exports},oHFR:function(t,a){}});
//# sourceMappingURL=10.94263d1a036945ce3a67.js.map