webpackJsonp([5,11],{"6uzZ":function(t,a){},McdD:function(t,a){},"OMK+":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={data:function(){return{}},methods:{getTrackLocation:function(t){return"http://app.wetracker.xyz/#/loadsong?url="+encodeURI("https://modland.com/pub/modules/Fasttracker 2/"+t.location)}},props:{user:Object,track:Object}},n={render:function(){var t=this.$createElement,a=this._self._c||t;return a("v-tooltip",{attrs:{bottom:""}},[a("a",{attrs:{slot:"activator",href:this.getTrackLocation(this.track),target:"_blank"},slot:"activator"},[a("v-hover",{scopedSlots:this._u([{key:"default",fn:function(t){var e=t.hover;return a("v-img",{class:"wetracker-logo elevation-"+(e?12:2),attrs:{src:"/static/logo_small.png",width:"80px"}})}}])})],1),this._v(" "),a("span",[this._v("Open track in WeTracker")])])},staticRenderFns:[]};var s=e("VU/8")(r,n,!1,function(t){e("McdD")},"data-v-22fcae09",null);a.default=s.exports},fkBk:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("Xxa5"),n=e.n(r),s=e("exGp"),i=e.n(s),c=e("mtWM"),o=e.n(c),l=e("TPW+"),u=e("H33K"),v=e("iwwE"),k=e("OMK+"),d={name:"Track",props:{user:Object},data:function(){return{trackId:null,track:null,playlists:[]}},components:{TrackRating:u.default,TrackFavourite:v.default,WeTracker:k.default},watch:{user:function(t,a){this.getTrackData()},trackId:function(t,a){this.getTrackData()}},beforeRouteUpdate:function(t,a,e){this.trackId=t.params.id,this.getTrackData(),e()},methods:{getTrackData:function(){var t=this;return i()(n.a.mark(function a(){var e,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.trackId){a.next=12;break}if(e="https://indigobeetle.pythonanywhere.com/api/tracks/"+t.trackId,!t.user){a.next=10;break}return a.next=5,t.user.getIdToken(!0);case 5:return r=a.sent,a.next=8,o.a.get(e,{headers:{Authorization:"bearer "+r}}).then(function(a){t.track=a.data}).catch(function(t){console.log(t)});case 8:a.next=12;break;case 10:return a.next=12,o.a.get(e).then(function(a){t.track=a.data}).catch(function(t){console.log(t)});case 12:case"end":return a.stop()}},a,t)}))()},getPlaylistsFromBackend:function(){var t=this;this.user&&this.user.getIdToken(!0).then(function(a){o.a.get("https://indigobeetle.pythonanywhere.com/api/playlists",{headers:{Authorization:"bearer "+a}}).then(function(a){t.playlists=a.data}).catch(function(t){console.log(t)})})},onPlay:function(){this.$emit("play-track",this.trackId)}},mixins:[l.a],created:function(){var t=this;this.trackId=parseInt(this.$route.params.id),this.getTrackData().then(function(){"1"===t.$route.query.play&&t.onPlay()}),this.getPlaylistsFromBackend()}},f={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"content"}},[t.track?e("v-container",{attrs:{"grid-list-xl":""}},[e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{sm2:""}},[e("v-img",{attrs:{src:t.getRandomAvatar(t.track.artist.id)}})],1),t._v(" "),e("v-flex",{attrs:{sm6:""}},[e("v-layout",{attrs:{column:"","fill-height":"","align-start":"","justify-center":""}},[e("h3",{staticClass:"track-title"},[t._v(t._s(t.track.title))]),t._v(" "),e("router-link",{attrs:{to:{name:"artist",params:{id:t.track.artist.id}}}},[e("h4",{staticClass:"artist-name"},[t._v(t._s(t.track.artist.name))])]),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:t.onPlay}},[e("v-icon",{attrs:{large:""}},[t._v("play_circle_filled")])],1)],1)],1)],1),t._v(" "),e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{shrink:""}},[e("track-rating",{attrs:{user:t.user,track:t.track},on:{"track-changed":function(a){t.getTrackData()}}})],1)],1),t._v(" "),e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{shrink:""}},[e("track-favourite",{attrs:{user:t.user,track:t.track},on:{"track-changed":function(a){t.getTrackData()}}})],1),t._v(" "),e("v-flex",{attrs:{shrink:""}},[e("v-menu",{attrs:{bottom:"",left:""},nativeOn:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[e("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[e("v-icon",[t._v("more_vert")])],1),t._v(" "),e("v-list",{attrs:{dense:""}},[e("v-menu",{attrs:{"offset-x":"","open-on-hover":""}},[e("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[e("v-list-tile-title",[t._v("Add to Playlist")]),t._v(" "),e("v-list-tile-action",{staticClass:"justify-end"},[e("v-icon",[t._v("play_arrow")])],1)],1),t._v(" "),e("v-list",{attrs:{dense:""}},t._l(t.playlists,function(a){return e("v-list-tile",{key:a.id,on:{click:function(e){t.addTrackToPlaylist(t.track.id,a.id)}}},[t._v("\n                    "+t._s(a.title)+"\n                ")])}),1)],1),t._v(" "),e("v-list-tile",[e("a",{attrs:{href:t.getWeTrackerLink(t.track),target:"_blank"}},[t._v("\n                Open in WeTracker\n              ")])])],1)],1)],1)],1),t._v(" "),e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{shrink:""}},[e("we-tracker",{attrs:{user:t.user,track:t.track}})],1)],1)],1):t._e()],1)},staticRenderFns:[]};var h=e("VU/8")(d,f,!1,function(t){e("6uzZ")},"data-v-5fbf9f94",null);a.default=h.exports}});
//# sourceMappingURL=5.de8623563098d680563b.js.map