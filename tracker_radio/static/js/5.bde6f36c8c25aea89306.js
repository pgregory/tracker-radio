webpackJsonp([5],{"5HUa":function(t,e){},xsBa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mtWM"),r=a.n(n),i=a("X+2x"),s=a.n(i),c=a("kxiW"),o=a.n(c),l={data:function(){return{track_fields:["title","artist","rating","remove"],tracks:[]}},props:{user:Object,playlistId:Number},watch:{playlistId:function(t,e){this.updatePlaylistTracks(t),this.$emit("track-selected",null)}},methods:{getPlaylistTracksFromBackend:function(){if(this.playlistId){var t=o.a.auth().currentUser;if(t){var e=this;t.getIdToken(!0).then(function(t){var a="https://indigobeetle.pythonanywhere.com/api/playlists/"+e.playlistId+"/tracks";r.a.get(a,{headers:{Authorization:"bearer "+t}}).then(function(t){e.tracks=t.data}).catch(function(t){console.log(t)})})}}},getPlaylistTracks:function(){this.tracks=[],this.getPlaylistTracksFromBackend()},updatePlaylistTracks:function(t){this.getPlaylistTracksFromBackend()},trackSelected:function(t,e){this.$emit("track-selected",t.id)},onRemoveTrack:function(t){if(this.playlistId){var e=o.a.auth().currentUser;if(e){var a=this;e.getIdToken(!0).then(function(e){var n="https://indigobeetle.pythonanywhere.com/api/playlists/"+a.playlistId+"/tracks/"+t;r.a.delete(n,{headers:{Authorization:"bearer "+e}}).then(function(t){a.getPlaylistTracksFromBackend()}).catch(function(t){console.log(t)})})}}}},components:{StarRating:s.a},created:function(){this.getPlaylistTracks()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{staticClass:"panel",attrs:{id:"tracks","no-body":"",header:"Tracks"}},[a("b-card-body",{staticClass:"tracks-list"},[a("b-table",{attrs:{striped:"",hover:"",responsive:"",items:t.tracks,fields:t.track_fields,small:""},on:{"row-clicked":t.trackSelected},scopedSlots:t._u([{key:"artist",fn:function(e){return[t._v("\n        "+t._s(e.item.artist.name)+"\n      ")]}},{key:"rating",fn:function(e){return[a("star-rating",{attrs:{"star-size":20,"read-only":!0},model:{value:e.item.average_rating,callback:function(a){t.$set(e.item,"average_rating",a)},expression:"data.item.average_rating"}})]}},{key:"remove",fn:function(e){return[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){t.onRemoveTrack(e.item.id)}}},[a("font-awesome-icon",{attrs:{icon:"trash"}})],1)]}}])})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,d,!1,function(t){a("5HUa")},"data-v-dd257bb0",null);e.default=u.exports}});
//# sourceMappingURL=5.bde6f36c8c25aea89306.js.map