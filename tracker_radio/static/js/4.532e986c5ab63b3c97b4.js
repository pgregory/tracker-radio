webpackJsonp([4,7],{"5kwi":function(t,e){},O77W:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("KfGB"),i=a("xsBa"),l=a("YMQP"),r=a("mtWM"),n=a.n(r),c=a("kxiW"),o=a.n(c),d={name:"Playlists",props:{user:Object},data:function(){return{playlistId:null,playlist:[],trackId:null,editablePlaylist:!1}},methods:{getPlaylistTracksFromBackend:function(){if(this.playlistId){var t=o.a.auth().currentUser;if(t){var e=this;t.getIdToken(!0).then(function(t){var a="https://indigobeetle.pythonanywhere.com/api/playlists/"+e.playlistId+"/tracks";n.a.get(a,{headers:{Authorization:"bearer "+t}}).then(function(t){e.playlist=t.data}).catch(function(t){console.log(t)})})}}},getPlaylistTracks:function(){this.tracks=[],this.getPlaylistTracksFromBackend()},selectPlaylist:function(t){this.playlistId=t.id,this.editablePlaylist=!t.auto,this.getPlaylistTracks()}},components:{PlaylistList:s.default,PlaylistTrackList:i.default,TrackPlayer:l.default}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"content"}},[null!=t.user?a("b-container",{attrs:{id:"playlists-panel"}},[a("b-row",[a("b-col",{staticClass:"lists",attrs:{sm:"8"}},[a("b-row",{staticClass:"playlists"},[a("b-col",{attrs:{sm:"12"}},[a("PlaylistList",{attrs:{"allow-edit":"true",user:t.user},on:{"playlist-selected":function(e){t.selectPlaylist(e)}}})],1)],1),t._v(" "),a("b-row",{staticClass:"tracks"},[a("b-col",{attrs:{sm:"12"}},[a("PlaylistTrackList",{attrs:{playlist:t.playlist,editablePlaylist:t.editablePlaylist,user:t.user},on:{"track-selected":function(e){t.trackId=e}}})],1)],1)],1),t._v(" "),a("b-col",{attrs:{sm:"4"}},[a("TrackPlayer",{attrs:{trackId:t.trackId,user:t.user}})],1)],1)],1):a("b-container",[a("b-jumbotron",{attrs:{header:"Playlists"}},[a("p",[t._v("To use playlists, login or sign up using the link at the right of the navigation bar above.")])])],1)],1)},staticRenderFns:[]};var y=a("VU/8")(d,u,!1,function(t){a("dJL4")},"data-v-3be1dd65",null);e.default=y.exports},dJL4:function(t,e){},xsBa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mtWM"),i=a.n(s),l=a("X+2x"),r=a.n(l),n=a("kxiW"),c=a.n(n),o={data:function(){return{track_fields:[{key:"title",label:"Title"},{key:"artist",label:"Artist"},{key:"rating",label:"Rating"}],tracks:[]}},props:{user:Object,playlist:Array,editablePlaylist:Boolean},watch:{playlist:function(t,e){this.$emit("track-selected",null)},editablePlaylist:function(t,e){this.track_fields=[{key:"title",label:"Title"},{key:"artist",label:"Artist"},{key:"rating",label:"Rating"}],t&&this.track_fields.push({key:"remove",label:"Remove"})}},methods:{trackSelected:function(t,e){this.$emit("track-selected",t.id)},onRemoveTrack:function(t){if(this.playlistId){var e=c.a.auth().currentUser;if(e){var a=this;e.getIdToken(!0).then(function(e){var s="https://indigobeetle.pythonanywhere.com/api/playlists/"+a.playlistId+"/tracks/"+t;i.a.delete(s,{headers:{Authorization:"bearer "+e}}).then(function(t){a.getPlaylistTracksFromBackend()}).catch(function(t){console.log(t)})})}}}},components:{StarRating:r.a}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{staticClass:"panel",attrs:{id:"tracks","no-body":"",header:"Tracks"}},[a("b-card-body",{staticClass:"tracks-list"},[a("b-table",{attrs:{striped:"",hover:"",responsive:"",items:t.playlist,fields:t.track_fields,small:""},on:{"row-clicked":t.trackSelected},scopedSlots:t._u([{key:"artist",fn:function(e){return[t._v("\n        "+t._s(e.item.artist.name)+"\n      ")]}},{key:"rating",fn:function(e){return[a("star-rating",{attrs:{"star-size":20,"read-only":!0},model:{value:e.item.average_rating,callback:function(a){t.$set(e.item,"average_rating",a)},expression:"data.item.average_rating"}})]}},{key:"remove",fn:function(e){return[t.editablePlaylist?a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){t.onRemoveTrack(e.item.id)}}},[a("font-awesome-icon",{attrs:{icon:"trash"}})],1):t._e()]}}])})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(o,d,!1,function(t){a("5kwi")},"data-v-5f423376",null);e.default=u.exports}});
//# sourceMappingURL=4.532e986c5ab63b3c97b4.js.map